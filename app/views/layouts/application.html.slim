doctype html
html
  head
    title = content_for(:title) || "VamoMarcar"
    meta name="viewport" content="width=device-width,initial-scale=1"
    meta name="apple-mobile-web-app-capable" content="yes"
    meta name="mobile-web-app-capable" content="yes"
    = csrf_meta_tags
    = csp_meta_tag

    = yield :head

    link rel="icon" href="/icon.png" type="image/png"
    link rel="icon" href="/icon.svg" type="image/svg+xml"
    link rel="apple-touch-icon" href="/icon.png"

    = stylesheet_link_tag :app, "data-turbo-track": "reload"
    = javascript_importmap_tags

  body class="bg-gray-50 min-h-screen"
    nav class="navbar-brasil shadow-lg fixed top-0 left-0 right-0 z-50"
      .container.mx-auto.px-4.py-4
        .flex.justify-between.items-center
          .flex.items-center.gap-2
            span.text-2xl ğŸ‡§ğŸ‡·
            a href="/" class="text-2xl font-bold text-brasil-gold"
              | VamoMarcar

          .flex.gap-4.items-center
            / Language Switcher
            div data-controller="dropdown" class="relative"
              button type="button" class="flex items-center gap-2 text-white hover:text-brasil-gold transition font-semibold" data-action="click->dropdown#toggle"
                - if I18n.locale == :"pt-BR"
                  span ğŸ‡§ğŸ‡· PT
                - else
                  span ğŸ‡ºğŸ‡¸ EN
                svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"
              div data-dropdown-target="menu" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-xl border-2 border-brasil-gold z-10"
                .py-1
                  = button_to switch_locale_path(locale: "pt-BR"), method: :post, class: "block w-full text-left px-4 py-2 text-gray-700 hover:bg-brasil-green-light transition #{'bg-brasil-green-light font-semibold' if I18n.locale == :'pt-BR'}" do
                    span ğŸ‡§ğŸ‡· PortuguÃªs
                  = button_to switch_locale_path(locale: "en"), method: :post, class: "block w-full text-left px-4 py-2 text-gray-700 hover:bg-brasil-green-light transition #{'bg-brasil-green-light font-semibold' if I18n.locale == :en}" do
                    span ğŸ‡ºğŸ‡¸ English

            - if user_signed_in?
              span class="text-white font-semibold" = current_user.email.split('@').first
              = button_to t('nav.sign_out'), destroy_user_session_path, method: :delete, class: "bg-brasil-blue hover:bg-brasil-blue-dark text-white px-4 py-2 rounded-lg transition font-semibold", data: { turbo: false }
            - else
              = link_to t('nav.sign_in'), new_user_session_path, class: "text-white hover:text-brasil-gold transition font-semibold"
              = link_to t('nav.sign_up'), new_user_registration_path, class: "btn-brasil"

    - if notice.present?
      .container.mx-auto.px-4.mt-20
        .alert-success-brasil
          span.text-2xl ğŸ‰
          span.block.sm:inline = notice

    - if alert.present?
      .container.mx-auto.px-4.mt-20
        .bg-red-100.border-2.border-red-400.text-red-700.px-4.py-3.rounded-lg.relative.flex.items-center.gap-3 role="alert"
          span.text-2xl âš ï¸
          span.block.sm:inline = alert

    main class="container mx-auto mt-24 px-4"
      = yield
